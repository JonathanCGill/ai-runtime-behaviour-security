<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 600" width="1000" height="600">
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b"/>
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
    </marker>
    <marker id="arrow-amber" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f59e0b"/>
    </marker>
    <marker id="arrow-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#3b82f6"/>
    </marker>
  </defs>
  
  <style>
    .title { font: bold 16px Inter, system-ui, sans-serif; fill: #1e293b; }
    .band-label { font: bold 12px Inter, system-ui, sans-serif; fill: white; }
    .timing { font: 10px Inter, system-ui, sans-serif; fill: white; opacity: 0.9; }
    .service { font: bold 10px Inter, system-ui, sans-serif; fill: #1e293b; }
    .detail { font: 9px Inter, system-ui, sans-serif; fill: #64748b; }
  </style>
  
  <!-- Background -->
  <rect width="1000" height="600" fill="#f8fafc"/>
  
  <!-- Title -->
  <text x="500" y="30" text-anchor="middle" class="title">AWS Implementation: Three Time Bands</text>
  
  <!-- =========================================== -->
  <!-- BAND A: INLINE -->
  <!-- =========================================== -->
  <rect x="30" y="50" width="300" height="520" rx="8" fill="#22c55e" opacity="0.1"/>
  <rect x="30" y="50" width="300" height="35" rx="8" fill="#22c55e"/>
  <text x="180" y="72" text-anchor="middle" class="band-label">INLINE (Milliseconds)</text>
  
  <!-- API Gateway -->
  <rect x="130" y="100" width="100" height="40" rx="4" fill="white" stroke="#22c55e" stroke-width="2"/>
  <text x="180" y="123" text-anchor="middle" class="service">API Gateway</text>
  
  <line x1="180" y1="140" x2="180" y2="160" stroke="#22c55e" stroke-width="2" marker-end="url(#arrow-green)"/>
  
  <!-- Lambda Router -->
  <rect x="130" y="170" width="100" height="40" rx="4" fill="white" stroke="#22c55e" stroke-width="2"/>
  <text x="180" y="187" text-anchor="middle" class="service">Lambda</text>
  <text x="180" y="200" text-anchor="middle" class="detail">Router + Validation</text>
  
  <line x1="180" y1="210" x2="180" y2="230" stroke="#22c55e" stroke-width="2" marker-end="url(#arrow-green)"/>
  
  <!-- Bedrock -->
  <rect x="110" y="240" width="140" height="50" rx="4" fill="white" stroke="#22c55e" stroke-width="2"/>
  <text x="180" y="260" text-anchor="middle" class="service">Bedrock</text>
  <text x="180" y="275" text-anchor="middle" class="detail">Guardrails + Generation</text>
  
  <line x1="180" y1="290" x2="180" y2="310" stroke="#22c55e" stroke-width="2" marker-end="url(#arrow-green)"/>
  
  <!-- Lambda Output -->
  <rect x="130" y="320" width="100" height="40" rx="4" fill="white" stroke="#22c55e" stroke-width="2"/>
  <text x="180" y="337" text-anchor="middle" class="service">Lambda</text>
  <text x="180" y="350" text-anchor="middle" class="detail">Output + DLP</text>
  
  <line x1="180" y1="360" x2="180" y2="380" stroke="#22c55e" stroke-width="2" marker-end="url(#arrow-green)"/>
  
  <!-- Decision -->
  <polygon points="180,390 220,420 180,450 140,420" fill="white" stroke="#22c55e" stroke-width="2"/>
  <text x="180" y="423" text-anchor="middle" class="service" style="font-size: 9px;">Decision</text>
  
  <!-- Send -->
  <line x1="220" y1="420" x2="260" y2="420" stroke="#22c55e" stroke-width="2" marker-end="url(#arrow-green)"/>
  <rect x="265" y="400" width="50" height="40" rx="4" fill="#22c55e"/>
  <text x="290" y="423" text-anchor="middle" class="band-label" style="font-size: 9px;">SEND</text>
  
  <!-- Queue -->
  <line x1="140" y1="420" x2="100" y2="420" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrow-amber)"/>
  <rect x="45" y="400" width="50" height="40" rx="4" fill="#f59e0b"/>
  <text x="70" y="423" text-anchor="middle" class="band-label" style="font-size: 9px;">QUEUE</text>
  
  <!-- Block -->
  <line x1="180" y1="450" x2="180" y2="480" stroke="#dc2626" stroke-width="2"/>
  <rect x="155" y="485" width="50" height="30" rx="4" fill="#dc2626"/>
  <text x="180" y="505" text-anchor="middle" class="band-label" style="font-size: 9px;">BLOCK</text>
  
  <!-- Events output to Band B -->
  <path d="M 250 265 L 350 265" stroke="#64748b" stroke-width="1" stroke-dasharray="4" marker-end="url(#arrow)"/>
  <text x="300" y="258" text-anchor="middle" class="detail">Events</text>
  
  <!-- =========================================== -->
  <!-- BAND B: NEAR-REAL-TIME -->
  <!-- =========================================== -->
  <rect x="350" y="50" width="300" height="520" rx="8" fill="#f59e0b" opacity="0.1"/>
  <rect x="350" y="50" width="300" height="35" rx="8" fill="#f59e0b"/>
  <text x="500" y="72" text-anchor="middle" class="band-label">NEAR-REAL-TIME (Seconds)</text>
  
  <!-- EventBridge -->
  <rect x="450" y="100" width="100" height="40" rx="4" fill="white" stroke="#f59e0b" stroke-width="2"/>
  <text x="500" y="123" text-anchor="middle" class="service">EventBridge</text>
  
  <line x1="500" y1="140" x2="500" y2="160" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrow-amber)"/>
  
  <!-- Kinesis -->
  <rect x="450" y="170" width="100" height="40" rx="4" fill="white" stroke="#f59e0b" stroke-width="2"/>
  <text x="500" y="193" text-anchor="middle" class="service">Kinesis</text>
  
  <line x1="500" y1="210" x2="500" y2="230" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrow-amber)"/>
  
  <!-- Lambda Aggregator -->
  <rect x="440" y="240" width="120" height="40" rx="4" fill="white" stroke="#f59e0b" stroke-width="2"/>
  <text x="500" y="257" text-anchor="middle" class="service">Lambda</text>
  <text x="500" y="270" text-anchor="middle" class="detail">Aggregator</text>
  
  <!-- Fan out -->
  <line x1="500" y1="280" x2="500" y2="310" stroke="#f59e0b" stroke-width="2"/>
  <line x1="400" y1="310" x2="600" y2="310" stroke="#f59e0b" stroke-width="2"/>
  <line x1="400" y1="310" x2="400" y2="330" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrow-amber)"/>
  <line x1="500" y1="310" x2="500" y2="330" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrow-amber)"/>
  <line x1="600" y1="310" x2="600" y2="330" stroke="#f59e0b" stroke-width="2" marker-end="url(#arrow-amber)"/>
  
  <!-- OpenSearch -->
  <rect x="360" y="340" width="80" height="50" rx="4" fill="white" stroke="#f59e0b" stroke-width="2"/>
  <text x="400" y="360" text-anchor="middle" class="service">OpenSearch</text>
  <text x="400" y="375" text-anchor="middle" class="detail">Alerting</text>
  
  <!-- DynamoDB -->
  <rect x="460" y="340" width="80" height="50" rx="4" fill="white" stroke="#f59e0b" stroke-width="2"/>
  <text x="500" y="360" text-anchor="middle" class="service">DynamoDB</text>
  <text x="500" y="375" text-anchor="middle" class="detail">Circuit Breakers</text>
  
  <!-- SNS -->
  <rect x="560" y="340" width="80" height="50" rx="4" fill="white" stroke="#f59e0b" stroke-width="2"/>
  <text x="600" y="360" text-anchor="middle" class="service">SNS</text>
  <text x="600" y="375" text-anchor="middle" class="detail">PagerDuty</text>
  
  <!-- Circuit breaker feedback -->
  <path d="M 500 390 L 500 430 L 330 430 L 330 420 L 180 420 L 180 395" stroke="#f59e0b" stroke-width="2" fill="none" stroke-dasharray="4" marker-end="url(#arrow-amber)"/>
  <text x="340" y="445" class="detail">Circuit breaker state</text>
  
  <!-- Logs to Band C -->
  <path d="M 290 420 L 290 500 L 350 500 L 350 265 L 670 265" stroke="#64748b" stroke-width="1" stroke-dasharray="4" marker-end="url(#arrow)"/>
  <text x="420" y="508" class="detail">Message logs</text>
  
  <!-- =========================================== -->
  <!-- BAND C: NEARLINE -->
  <!-- =========================================== -->
  <rect x="670" y="50" width="300" height="520" rx="8" fill="#3b82f6" opacity="0.1"/>
  <rect x="670" y="50" width="300" height="35" rx="8" fill="#3b82f6"/>
  <text x="820" y="72" text-anchor="middle" class="band-label">NEARLINE (Minutes+)</text>
  
  <!-- S3 -->
  <rect x="770" y="100" width="100" height="40" rx="4" fill="white" stroke="#3b82f6" stroke-width="2"/>
  <text x="820" y="117" text-anchor="middle" class="service">S3</text>
  <text x="820" y="130" text-anchor="middle" class="detail">Message Logs</text>
  
  <line x1="820" y1="140" x2="820" y2="160" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrow-blue)"/>
  
  <!-- Step Functions -->
  <rect x="750" y="170" width="140" height="40" rx="4" fill="white" stroke="#3b82f6" stroke-width="2"/>
  <text x="820" y="187" text-anchor="middle" class="service">Step Functions</text>
  <text x="820" y="200" text-anchor="middle" class="detail">Sample Selector</text>
  
  <line x1="820" y1="210" x2="820" y2="230" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrow-blue)"/>
  
  <!-- Bedrock Judge -->
  <rect x="760" y="240" width="120" height="40" rx="4" fill="white" stroke="#3b82f6" stroke-width="2"/>
  <text x="820" y="257" text-anchor="middle" class="service">Bedrock</text>
  <text x="820" y="270" text-anchor="middle" class="detail">Judge Evaluation</text>
  
  <line x1="820" y1="280" x2="820" y2="300" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrow-blue)"/>
  
  <!-- OpenSearch Findings -->
  <rect x="760" y="310" width="120" height="40" rx="4" fill="white" stroke="#3b82f6" stroke-width="2"/>
  <text x="820" y="327" text-anchor="middle" class="service">OpenSearch</text>
  <text x="820" y="340" text-anchor="middle" class="detail">Findings Store</text>
  
  <line x1="820" y1="350" x2="820" y2="370" stroke="#3b82f6" stroke-width="2" marker-end="url(#arrow-blue)"/>
  
  <!-- QuickSight -->
  <rect x="770" y="380" width="100" height="40" rx="4" fill="white" stroke="#3b82f6" stroke-width="2"/>
  <text x="820" y="403" text-anchor="middle" class="service">QuickSight</text>
  <text x="820" y="416" text-anchor="middle" class="detail">Dashboards</text>
  
  <!-- Policy updates feedback -->
  <rect x="750" y="460" width="140" height="50" rx="4" fill="#3b82f6"/>
  <text x="820" y="482" text-anchor="middle" class="band-label" style="font-size: 10px;">Policy Updates</text>
  <text x="820" y="498" text-anchor="middle" class="timing" style="font-size: 8px;">Guardrails, Prompts</text>
  
  <path d="M 750 485 L 180 485 L 180 295" stroke="#3b82f6" stroke-width="2" fill="none" stroke-dasharray="6" marker-end="url(#arrow-blue)"/>
  <text x="400" y="478" class="detail">Improves inline controls</text>
</svg>
